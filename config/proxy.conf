# host "192.168.56.103:8080" {
#     proxy_pass http://192.168.56.103:9000;
# }

# host "app1.local" {
#     proxy_pass http://192.168.56.103:9001;
# }

# host "app2.local" {
#     proxy_set_header Host $host;

#     proxy_pass http://192.168.56.210:9002;
#     proxy_pass http://192.168.56.220:9002;
	

#     dist_policy round-robin
# }


# host "127.0.0.1:8080" {
#     proxy_pass http://127.0.0.1:9000;
# }

# host "app1.local" {
#     proxy_pass http://127.0.0.1:9001;
# }

# host "app2.local" {
#     proxy_set_header Host $host;

#     proxy_pass http://192.168.56.210:9002;
#     proxy_pass http://192.168.56.220:9002;
	

#     dist_policy round-robin
# }
# Use $HOST or {{HOST}} as placeholder for dynamic IP replacement
host "$HOST:8080" {
    proxy_pass http://$HOST:9000;   # backend (login)
    proxy_pass http://$HOST:9001;   # backend 1 
    proxy_pass http://$HOST:9002;   # backend 2
    proxy_pass http://$HOST:9003;   # backend 3
    proxy_pass http://$HOST:9004;   # backend 4
    proxy_pass http://$HOST:9005;   # backend 5
    dist_policy round-robin
}

host "tracker.local" {
    proxy_pass http://$HOST:9000;   # WeApRous tracker
}

host "peer1.local" {
    proxy_pass http://$HOST:9001;   # WeApRous peer 1
}

host "peer2.local" {
    proxy_pass http://$HOST:9002;   # WeApRous peer 2
}

# Localhost fallback
host "127.0.0.1:8080" {
    proxy_pass http://127.0.0.1:9000;
}